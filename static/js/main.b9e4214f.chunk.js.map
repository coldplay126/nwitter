{"version":3,"sources":["fb.js","components/AuthForm.js","routes/Auth.js","components/Factory.js","components/Nweet.js","routes/Home.js","routes/Profile.js","components/Navigation.js","components/Router.js","components/App.js","index.js"],"names":["curry","f","a","bs","length","init","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","databaseURL","auth","getAuth","profile","data","updateProfile","createUser","email","password","createUserWithEmailAndPassword","signIn","signInWithEmailAndPassword","googleProvider","GoogleAuthProvider","githubProvider","GithubAuthProvider","popUp","provider","signInWithPopup","db","getFirestore","docRefCurry","docu","object","addDoc","collection","querySnapShotCurry","getDocs","snapShotCurry","path","segm","callback","onSnapshot","doc","snapCurry","query","snapFunctionCurry","deleteNweetCurry","col","id","deleteDoc","updateNweetCurry","update","updateDoc","docRef","snapFunction","deleteNweet","updateNweet","storage","getStorage","storageRef","child","ref","uploadFile","file","uploadBytes","downloadFile","getDownloadURL","deleteObj","deleteObject","AuthForm","useState","form","setForm","newAccount","setNewAccount","error","setError","onChanage","e","target","name","value","onSubmit","event","preventDefault","message","type","placeholder","required","onChange","onClick","prev","Auth","socialClick","Factory","userObj","nweet","setNweet","preview","setPreview","upload","setUpload","onRef","useRef","onCancel","current","fileUrl","uid","uuidv4","text","CreatedAt","Date","now","creatorId","maxLength","accept","files","url","window","URL","createObjectURL","onload","revokeObjectURL","height","src","alt","Nweet","nweetObj","isOwner","edit","setEdit","newNweet","setNewNweet","onDelete","confirm","onClickHandler","Home","nweets","setNweets","useEffect","order","nweetArr","docs","map","orderBy","Profile","refreshUser","displayName","newDisplayName","setNewDisplayName","navigate","useNavigate","signout","signOut","then","Navigation","to","AppRouter","isLogIn","element","App","setInit","setUserObj","setChangeName","user","providerData","onAuthStateChanged","islogIn","Boolean","getFullYear","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.b9e4214f.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  onAuthStateChanged,\r\n  signInWithPopup,\r\n  GoogleAuthProvider,\r\n  GithubAuthProvider,\r\n  updateProfile,\r\n} from \"firebase/auth\";\r\n\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  addDoc,\r\n  getDocs,\r\n  onSnapshot,\r\n  doc,\r\n  query,\r\n  orderBy,\r\n  deleteDoc,\r\n  updateDoc,\r\n  where,\r\n} from \"firebase/firestore\";\r\n\r\nimport {\r\n  getStorage,\r\n  ref,\r\n  uploadBytes,\r\n  getDownloadURL,\r\n  deleteObject,\r\n} from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket:\r\n    process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId:\r\n    process.env.REACT_APP_MESSAGEING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n};\r\n\r\nconst curry =\r\n  (f) =>\r\n  (a, ...bs) =>\r\n    bs.length\r\n      ? f(a, ...bs)\r\n      : (...bs) => f(a, ...bs);\r\n\r\nconst init = initializeApp(firebaseConfig);\r\n\r\n//Auth\r\nexport const auth = getAuth(init);\r\n\r\nexport const profile = async (auth, data) =>\r\n  await updateProfile(auth, data);\r\n\r\nexport const createUser = async (\r\n  auth,\r\n  email,\r\n  password,\r\n) =>\r\n  await createUserWithEmailAndPassword(\r\n    auth,\r\n    email,\r\n    password,\r\n  );\r\n\r\nexport const signIn = async (\r\n  auth,\r\n  email,\r\n  password,\r\n) =>\r\n  await signInWithEmailAndPassword(\r\n    auth,\r\n    email,\r\n    password,\r\n  );\r\n\r\nexport const authState = (auth, callback) =>\r\n  onAuthStateChanged(auth, (user) =>\r\n    callback(user),\r\n  );\r\n\r\nexport const googleProvider =\r\n  new GoogleAuthProvider();\r\n\r\nexport const githubProvider =\r\n  new GithubAuthProvider();\r\n\r\nexport const popUp = async (auth, provider) =>\r\n  await signInWithPopup(auth, provider);\r\n\r\n//DB\r\nconst db = getFirestore();\r\n\r\nconst docRefCurry = curry(\r\n  async (db, docu, object) =>\r\n    await addDoc(collection(db, docu), object),\r\n);\r\n\r\nconst querySnapShotCurry = curry(\r\n  async (db, docu) =>\r\n    await getDocs(collection(db, docu)),\r\n);\r\n\r\nconst snapShotCurry = curry(\r\n  (db, path, segm, callback) =>\r\n    onSnapshot(doc(db, path, segm), callback),\r\n);\r\n\r\nexport const orderByCurry = (path, order) =>\r\n  orderBy(path, order);\r\n\r\nexport const whereCurry = (t, e, n) =>\r\n  where(t, e, n);\r\n\r\nconst snapCurry = curry((db, path, callback) => {\r\n  onSnapshot(\r\n    query(collection(db, path)),\r\n    callback,\r\n  );\r\n});\r\n\r\nconst snapFunctionCurry = curry(\r\n  (db, path, callback, f) => {\r\n    onSnapshot(\r\n      query(collection(db, path), f),\r\n      callback,\r\n    );\r\n  },\r\n);\r\nconst deleteNweetCurry = curry(\r\n  async (db, col, id) =>\r\n    await deleteDoc(doc(db, col, id)),\r\n);\r\n\r\nconst updateNweetCurry = curry(\r\n  async (db, col, id, update) =>\r\n    await updateDoc(doc(db, col, id), update),\r\n);\r\n\r\nexport const docRef = docRefCurry(db);\r\nexport const querySnapShot =\r\n  querySnapShotCurry(db);\r\nexport const snapShot = snapShotCurry(db);\r\nexport const snap = snapCurry(db);\r\nexport const snapFunction = snapFunctionCurry(db);\r\nexport const deleteNweet = deleteNweetCurry(db);\r\nexport const updateNweet = updateNweetCurry(db);\r\n\r\n//storage\r\nexport const storage = getStorage();\r\n\r\nexport const storageRef = (storage, child) =>\r\n  ref(storage, child);\r\n\r\nexport const uploadFile = async (\r\n  storageRef,\r\n  file,\r\n) => await uploadBytes(storageRef, file);\r\n\r\nexport const downloadFile = async (storageRef) =>\r\n  await getDownloadURL(storageRef);\r\n\r\nexport const deleteObj = async (ref) =>\r\n  await deleteObject(ref);\r\n","import { useState } from \"react\";\r\nimport { auth, createUser, signIn } from \"fb\";\r\n\r\nexport function AuthForm() {\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [newAccount, setNewAccount] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const onChanage = (e) => {\r\n    const {\r\n      target: { name, value },\r\n    } = e;\r\n    setForm({\r\n      ...form,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      if (newAccount) {\r\n        await createUser(auth, form.email, form.password);\r\n      } else {\r\n        await signIn(auth, form.email, form.password);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const toggleAccount = () => setNewAccount((prev) => !prev);\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          value={form.email}\r\n          onChange={onChanage}\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          required\r\n          value={form.password}\r\n          onChange={onChanage}\r\n        />\r\n        <input\r\n          type=\"submit\"\r\n          value={newAccount ? \"Create Account\" : \"Sign In\"}\r\n        />\r\n        {error}\r\n      </form>\r\n      <span onClick={toggleAccount}>\r\n        {newAccount ? \"Sign In\" : \"Create Account\"}\r\n      </span>\r\n    </>\r\n  );\r\n}\r\n","import { AuthForm } from \"components/AuthForm\";\r\nimport { auth, githubProvider, googleProvider, popUp } from \"fb\";\r\nimport { useState } from \"react\";\r\n\r\nconst Auth = () => {\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const socialClick = async (e) => {\r\n    const {\r\n      target: { name },\r\n    } = e;\r\n\r\n    try {\r\n      if (name === \"google\") {\r\n        await popUp(auth, googleProvider);\r\n      } else if (name === \"github\") {\r\n        await popUp(auth, githubProvider);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AuthForm></AuthForm>\r\n      <div>\r\n        <button name=\"google\" onClick={socialClick}>\r\n          Contiune with Google\r\n        </button>\r\n        <button name=\"github\" onClick={socialClick}>\r\n          Contiune with GitHub\r\n        </button>\r\n        {error}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","import { useState, useRef } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { docRef, downloadFile, storage, storageRef, uploadFile } from \"fb\";\r\n\r\nexport function Factory({ userObj }) {\r\n  const [nweet, setNweet] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [upload, setUpload] = useState(\"\");\r\n\r\n  const onImage = (e) => {\r\n    const {\r\n      target: { files },\r\n    } = e;\r\n\r\n    setUpload(files[0]);\r\n\r\n    const url = window.URL.createObjectURL(files[0]);\r\n    setPreview(url);\r\n    window.onload = () => window.URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const {\r\n      target: { value },\r\n    } = e;\r\n    setNweet(value);\r\n  };\r\n\r\n  const onRef = useRef(\"\");\r\n\r\n  const onCancel = () => {\r\n    setPreview(null);\r\n    onRef.current.value = null;\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      let fileUrl = \"\";\r\n      if (upload !== \"\") {\r\n        const ref = storageRef(storage, `${userObj.uid}/${uuidv4()}`);\r\n\r\n        await uploadFile(ref, upload);\r\n\r\n        fileUrl = await downloadFile(ref);\r\n      }\r\n\r\n      await docRef(\"nweets\", {\r\n        text: nweet,\r\n        CreatedAt: Date.now(),\r\n        creatorId: userObj.uid,\r\n        fileUrl,\r\n      });\r\n      setNweet(\"\");\r\n      setUpload(\"\");\r\n      onCancel();\r\n    } catch (err) {\r\n      setError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"What's on your mind?\"\r\n        maxLength={120}\r\n        value={nweet}\r\n        onChange={onChange}\r\n      />\r\n      <input type=\"file\" accept=\"image/*\" onChange={onImage} ref={onRef} />\r\n      <input type=\"submit\" value=\"Nweet\" />\r\n      {preview && (\r\n        <div>\r\n          <img height=\"100px\" src={preview} alt=\"thumbnail\" />\r\n          <button onClick={onCancel}>취소</button>\r\n        </div>\r\n      )}\r\n      {error}\r\n    </form>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\n\r\nimport { deleteNweet, deleteObj, storage, storageRef, updateNweet } from \"fb\";\r\n\r\nconst Nweet = ({ nweetObj, isOwner }) => {\r\n  const [edit, setEdit] = useState(false);\r\n  const [newNweet, setNewNweet] = useState(nweetObj.text);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    updateNweet(\"nweets\", nweetObj.id, {\r\n      text: newNweet,\r\n    });\r\n    setEdit(false);\r\n  };\r\n\r\n  const onDelete = async () => {\r\n    const ok = window.confirm(\"이 트윗을 삭제하시겠습니까?\");\r\n    if (ok) await deleteNweet(\"nweets\", nweetObj.id);\r\n\r\n    if (nweetObj.fileUrl)\r\n      await deleteObj(storageRef(storage, nweetObj.fileUrl));\r\n  };\r\n\r\n  const onEdit = (event) => {\r\n    const {\r\n      target: { value },\r\n    } = event;\r\n    setNewNweet(value);\r\n  };\r\n\r\n  const toggleEdit = () => setEdit((prev) => !prev);\r\n\r\n  const onClickHandler = async (event) => {\r\n    const {\r\n      target: { name },\r\n    } = event;\r\n\r\n    if (name === \"delete\") await onDelete();\r\n    else toggleEdit();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {edit ? (\r\n        <>\r\n          {isOwner && (\r\n            <>\r\n              <form onSubmit={onSubmit}>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"내용을 수정하세요\"\r\n                  onChange={onEdit}\r\n                  value={newNweet}\r\n                  required\r\n                />\r\n                <input type=\"submit\" value=\"수정\" />\r\n              </form>\r\n              <button onClick={onClickHandler}>취소</button>\r\n            </>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <h4>{nweetObj.text}</h4>\r\n          {nweetObj.fileUrl && (\r\n            <img height=\"100px\" src={nweetObj.fileUrl} alt=\"img\" />\r\n          )}\r\n          {isOwner && (\r\n            <>\r\n              <button name=\"edit\" onClick={onClickHandler}>\r\n                수정\r\n              </button>\r\n              <button name=\"delete\" onClick={onClickHandler}>\r\n                삭제\r\n              </button>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Nweet;\r\n","import { Factory } from \"components/Factory\";\r\nimport Nweet from \"components/Nweet\";\r\nimport { orderByCurry, snapFunction } from \"fb\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst Home = ({ userObj }) => {\r\n  const [nweets, setNweets] = useState([]);\r\n\r\n  useEffect(() => {\r\n    //refer to fb.js\r\n    snapFunction(\r\n      \"nweets\",\r\n      (doc) => {\r\n        const nweetArr = doc.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setNweets(nweetArr);\r\n      },\r\n      orderByCurry(\"CreatedAt\", \"desc\"),\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Factory userObj={userObj}></Factory>\r\n      <div>\r\n        {nweets.map((nweet) => (\r\n          <Nweet\r\n            key={nweet.id}\r\n            isOwner={nweet.creatorId === userObj.uid}\r\n            nweetObj={nweet}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import { auth, profile } from \"fb\";\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nconst Profile = ({ userObj, refreshUser }) => {\r\n  const [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\r\n  const navigate = useNavigate();\r\n\r\n  const signout = async () => await auth.signOut();\r\n\r\n  const OnLogoutClick = () => {\r\n    signout().then(() => navigate(\"/\"));\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const {\r\n      target: { value },\r\n    } = e;\r\n    setNewDisplayName(value);\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (userObj.displayName !== newDisplayName) {\r\n      await profile(userObj, {\r\n        displayName: newDisplayName,\r\n      });\r\n      refreshUser();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Display Name\"\r\n          value={newDisplayName}\r\n          onChange={onChange}\r\n        />\r\n        <input type=\"submit\" value=\"update Profile\" />\r\n      </form>\r\n      <button name=\"LogOut\" onClick={OnLogoutClick}>\r\n        Log Out\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import { Link } from \"react-router-dom\";\r\n\r\nconst Navigation = ({ userObj }) => (\r\n  <nav>\r\n    <ul>\r\n      <li>\r\n        <Link to=\"/\">Home</Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/profile\">\r\n          {userObj.displayName}'s Profile\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default Navigation;\r\n","import { Route, Routes } from \"react-router-dom\";\r\nimport Auth from \"routes/Auth\";\r\nimport Home from \"routes/Home\";\r\nimport Profile from \"routes/Profile\";\r\nimport Navigation from \"components/Navigation\";\r\n\r\nconst AppRouter = ({ isLogIn, userObj, refreshUser }) => {\r\n  return (\r\n    <>\r\n      <div>{isLogIn && <Navigation userObj={userObj} />}</div>\r\n      <Routes>\r\n        {isLogIn ? (\r\n          <>\r\n            <Route path=\"/\" element={<Home userObj={userObj} />} />\r\n            <Route\r\n              path=\"/profile\"\r\n              element={<Profile refreshUser={refreshUser} userObj={userObj} />}\r\n            />\r\n          </>\r\n        ) : (\r\n          <Route path=\"/\" element={<Auth />} />\r\n        )}\r\n      </Routes>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import { useState, useEffect } from \"react\";\r\nimport AppRouter from \"components/Router\";\r\nimport { auth, authState, profile } from \"fb\";\r\n\r\nfunction App() {\r\n  const [init, setInit] = useState(false);\r\n  const [userObj, setUserObj] = useState(null);\r\n  const [changeName, setChangeName] = useState(false);\r\n\r\n  useEffect(\r\n    () =>\r\n      authState(auth, async (user) => {\r\n        if (user) {\r\n          user.displayName === null\r\n            ? await profile(user, {\r\n                displayName: user.providerData[0].email,\r\n              })\r\n            : await setUserObj(user);\r\n          await setUserObj(user);\r\n        } else {\r\n          setUserObj(null);\r\n        }\r\n        setInit(true);\r\n      }),\r\n    [],\r\n  );\r\n\r\n  const islogIn = Boolean(userObj);\r\n\r\n  function refreshUser() {\r\n    return setChangeName((prev) => !prev);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {init ? (\r\n        <AppRouter\r\n          refreshUser={refreshUser}\r\n          isLogIn={islogIn}\r\n          userObj={userObj}\r\n        />\r\n      ) : (\r\n        \"Loading...\"\r\n      )}\r\n      <footer>&copy; {new Date().getFullYear()} Nwitter</footer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n"],"sourceRoot":""}