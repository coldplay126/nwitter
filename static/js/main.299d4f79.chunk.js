(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{45:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n.n(r),c=n(36),u=n.n(c),s=n(0),i=n.n(s),o=n(1),j=n(11),b=n(12),p=n(4),f=n(29),O=n(37),l=n(23),x=n(15),d=n(27),h=function(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.length?e.apply(void 0,[t].concat(r)):function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(void 0,[t].concat(r))}}},v=Object(O.a)({apiKey:"AIzaSyDCAXqA231iwEuQmXvul6oUVH-aUMFj1CE",authDomain:"nwitter-322f3.firebaseapp.com",projectId:"nwitter-322f3",storageBucket:"gs://nwitter-322f3.appspot.com",messagingSenderId:"621561249322",appId:"1:621561249322:web:01ca416d2ed227fe588d53",databaseURL:"nwitter-322f3.appspot.com"}),m=Object(l.d)(v),w=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.h)(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.c)(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.f)(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=new l.b,S=new l.a,C=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.g)(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=Object(x.f)(),I=h(function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)(Object(x.b)(t,n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),L=h(function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.e)(Object(x.b)(t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),D=h((function(e,t,n,r){return Object(x.g)(Object(x.d)(e,t,n),r)})),F=h((function(e,t,n){Object(x.g)(Object(x.i)(Object(x.b)(e,t)),n)})),A=h((function(e,t,n,r){Object(x.g)(Object(x.i)(Object(x.b)(e,t),r),n)})),N=h(function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.c)(Object(x.d)(t,n,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),E=h(function(){var e=Object(o.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.j)(Object(x.d)(t,n,r),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()),R=I(U),q=(L(U),D(U),F(U),A(U)),B=N(U),H=E(U),P=Object(d.c)(),G=function(e,t){return Object(d.d)(e,t)},J=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=n(7);function K(){var e=Object(r.useState)({email:"",password:""}),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),u=Object(j.a)(c,2),s=u[0],b=u[1],O=Object(r.useState)(""),l=Object(j.a)(O,2),x=l[0],d=l[1],h=function(e){var t=e.target,r=t.name,c=t.value;a(Object(f.a)(Object(f.a)({},n),{},Object(p.a)({},r,c)))},v=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!s){e.next=7;break}return e.next=5,g(m,n.email,n.password);case 5:e.next=9;break;case 7:return e.next=9,k(m,n.email,n.password);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),d(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("form",{onSubmit:v,children:[Object(z.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n.email,onChange:h}),Object(z.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:n.password,onChange:h}),Object(z.jsx)("input",{type:"submit",value:s?"Create Account":"Sign In"}),x]}),Object(z.jsx)("span",{onClick:function(){return b((function(e){return!e}))},children:s?"Sign In":"Create Account"})]})}var Q=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.name,e.prev=1,"google"!==n){e.next=7;break}return e.next=5,C(m,y);case 5:e.next=10;break;case 7:if("github"!==n){e.next=10;break}return e.next=10,C(m,S);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)(K,{}),Object(z.jsxs)("div",{children:[Object(z.jsx)("button",{name:"google",onClick:c,children:"Contiune with Google"}),Object(z.jsx)("button",{name:"github",onClick:c,children:"Contiune with GitHub"}),n]})]})},V=n(47);function W(e){var t=e.userObj,n=Object(r.useState)(""),a=Object(j.a)(n,2),c=a[0],u=a[1],s=Object(r.useState)(""),b=Object(j.a)(s,2),p=b[0],f=b[1],O=Object(r.useState)(""),l=Object(j.a)(O,2),x=l[0],d=l[1],h=Object(r.useState)(""),v=Object(j.a)(h,2),m=v[0],w=v[1],g=Object(r.useRef)(""),k=function(){d(null),g.current.value=null},y=function(){var e=Object(o.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,r="",""===m){e.next=10;break}return a=G(P,"".concat(t.uid,"/").concat(Object(V.a)())),e.next=7,J(a,m);case 7:return e.next=9,M(a);case 9:r=e.sent;case 10:return e.next=12,R("nweets",{text:c,CreatedAt:Date.now(),creatorId:t.uid,fileUrl:r});case 12:u(""),w(""),k(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),f(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)("form",{onSubmit:y,children:[Object(z.jsx)("input",{type:"text",placeholder:"What's on your mind?",maxLength:120,value:c,onChange:function(e){var t=e.target.value;u(t)}}),Object(z.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files;w(t[0]);var n=window.URL.createObjectURL(t[0]);d(n),window.onload=function(){return window.URL.revokeObjectURL(n)}},ref:g}),Object(z.jsx)("input",{type:"submit",value:"Nweet"}),x&&Object(z.jsxs)("div",{children:[Object(z.jsx)("img",{height:"100px",src:x,alt:"thumbnail"}),Object(z.jsx)("button",{onClick:k,children:"\ucde8\uc18c"})]}),p]})}var Y=function(e){var t=e.nweetObj,n=e.isOwner,a=Object(r.useState)(!1),c=Object(j.a)(a,2),u=c[0],s=c[1],b=Object(r.useState)(t.text),p=Object(j.a)(b,2),f=p[0],O=p[1],l=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc774 \ud2b8\uc717\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=4;break}return e.next=4,B("nweets",t.id);case 4:if(!t.fileUrl){e.next=7;break}return e.next=7,X(G(P,t.fileUrl));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==t.target.name){e.next=6;break}return e.next=4,l();case 4:e.next=7;break;case 6:s((function(e){return!e}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsx)("div",{children:u?Object(z.jsx)(z.Fragment,{children:n&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),H("nweets",t.id,{text:f}),s(!1)},children:[Object(z.jsx)("input",{type:"text",placeholder:"\ub0b4\uc6a9\uc744 \uc218\uc815\ud558\uc138\uc694",onChange:function(e){var t=e.target.value;O(t)},value:f,required:!0}),Object(z.jsx)("input",{type:"submit",value:"\uc218\uc815"})]}),Object(z.jsx)("button",{onClick:x,children:"\ucde8\uc18c"})]})}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h4",{children:t.text}),t.fileUrl&&Object(z.jsx)("img",{height:"100px",src:t.fileUrl,alt:"img"}),n&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("button",{name:"edit",onClick:x,children:"\uc218\uc815"}),Object(z.jsx)("button",{name:"delete",onClick:x,children:"\uc0ad\uc81c"})]})]})})},T=function(e){var t=e.userObj,n=Object(r.useState)([]),a=Object(j.a)(n,2),c=a[0],u=a[1];return Object(r.useEffect)((function(){var e,t;q("nweets",(function(e){var t=e.docs.map((function(e){return Object(f.a)({id:e.id},e.data())}));u(t)}),(e="CreatedAt",t="desc",Object(x.h)(e,t)))}),[]),Object(z.jsxs)("div",{children:[Object(z.jsx)(W,{userObj:t}),Object(z.jsx)("div",{children:c.map((function(e){return Object(z.jsx)(Y,{isOwner:e.creatorId===t.uid,nweetObj:e},e.id)}))})]})},Z=function(e){var t=e.userObj,n=e.refreshUser,a=Object(r.useState)(t.displayName),c=Object(j.a)(a,2),u=c[0],s=c[1],p=Object(b.f)(),f=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.signOut();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.displayName===u){e.next=5;break}return e.next=4,w(t,{displayName:u});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("form",{onSubmit:O,children:[Object(z.jsx)("input",{type:"text",placeholder:"Display Name",value:u,onChange:function(e){var t=e.target.value;s(t)}}),Object(z.jsx)("input",{type:"submit",value:"update Profile"})]}),Object(z.jsx)("button",{name:"LogOut",onClick:function(){f().then((function(){return p("/")}))},children:"Log Out"})]})},$=n(26),_=function(e){var t=e.userObj;return Object(z.jsx)("nav",{children:Object(z.jsxs)("ul",{children:[Object(z.jsx)("li",{children:Object(z.jsx)($.b,{to:"/",children:"Home"})}),Object(z.jsx)("li",{children:Object(z.jsxs)($.b,{to:"/profile",children:[t.displayName,"'s Profile"]})})]})})},ee=function(e){var t=e.isLogIn,n=e.userObj,r=e.refreshUser;return Object(z.jsxs)($.a,{basename:"https://coldplay126.github.io/nwitter/",children:[Object(z.jsx)("div",{children:t&&Object(z.jsx)(_,{userObj:n})}),Object(z.jsx)(b.c,{children:t?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(b.a,{path:"/",element:Object(z.jsx)(T,{userObj:n})}),Object(z.jsx)(b.a,{path:"/profile",element:Object(z.jsx)(Z,{refreshUser:r,userObj:n})})]}):Object(z.jsx)(b.a,{path:"/",element:Object(z.jsx)(Q,{})})})]})};var te=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),u=Object(j.a)(c,2),s=u[0],b=u[1],p=Object(r.useState)(!1),f=Object(j.a)(p,2),O=(f[0],f[1]);Object(r.useEffect)((function(){return e=m,t=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}if(null!==t.displayName){e.next=6;break}return e.next=4,w(t,{displayName:t.providerData[0].email});case 4:e.next=8;break;case 6:return e.next=8,b(t);case 8:return e.next=10,b(t);case 10:e.next=13;break;case 12:b(null);case 13:a(!0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(l.e)(e,(function(e){return t(e)}));var e,t}),[]);var x=Boolean(s);return Object(z.jsxs)(z.Fragment,{children:[n?Object(z.jsx)(ee,{refreshUser:function(){return O((function(e){return!e}))},isLogIn:x,userObj:s}):"Loading...",Object(z.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Nwitter"]})]})};u.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(te,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.299d4f79.chunk.js.map